import{R as o,u as C,j as e,T as v}from"./index-DjrlQ2F5.js";import{L as S}from"./LoadingButton-CeD71zW5.js";import{u as w,T as A}from"./useAuth-DvVyDevX.js";import{C as T,S as l,A as h}from"./Snackbar-CFecR7nN.js";import"./OutlinedInput-DsoeenSI.js";import"./CircularProgress-BMgE6Vjs.js";const E=()=>{const[c,d]=o.useState(""),[m,u]=o.useState(!1),[a,r]=o.useState(""),[s,n]=o.useState(""),{isAuthenticated:g,loading:p}=w(),y=C(),f=i=>{d(i.target.value)},j=async i=>{i.preventDefault(),u(!0);try{const t=await fetch("https://ekarigar-accounts.onrender.com/projectcategories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pcName:c})});if(!t.ok){const x=await t.text();throw new Error(x||"Failed to add category")}n("Project Category added successfully!"),d(""),setTimeout(()=>{y("/project/edit")},2e3)}catch(t){r(t.message)}finally{u(!1)}};return p?e.jsx("div",{children:"Loading..."}):g?e.jsxs(T,{maxWidth:"sm",children:[e.jsx(v,{variant:"h4",gutterBottom:!0,children:"Add Project Category"}),e.jsxs("form",{onSubmit:j,children:[e.jsx(A,{label:"Category Name",variant:"outlined",fullWidth:!0,value:c,onChange:f,margin:"normal",required:!0}),e.jsx(S,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,loading:m,children:"Add Category"})]}),s&&e.jsx(l,{open:!!s,autoHideDuration:6e3,onClose:()=>n(""),children:e.jsx(h,{onClose:()=>n(""),severity:"success",sx:{width:"100%"},children:s})}),a&&e.jsx(l,{open:!!a,autoHideDuration:6e3,onClose:()=>r(""),children:e.jsx(h,{onClose:()=>r(""),severity:"error",sx:{width:"100%"},children:a})})]}):null};export{E as default};
