import{R as a,u as j,j as e,T as v}from"./index-DjrlQ2F5.js";import{L as S}from"./LoadingButton-CeD71zW5.js";import{u as w,T as A}from"./useAuth-DvVyDevX.js";import{C as T,S as u,A as h}from"./Snackbar-CFecR7nN.js";import"./OutlinedInput-DsoeenSI.js";import"./CircularProgress-BMgE6Vjs.js";const R=()=>{const[c,d]=a.useState(""),[o,r]=a.useState(""),[s,n]=a.useState(""),[m,l]=a.useState(!1),{isAuthenticated:g,loading:p}=w(),y=j(),f=i=>{d(i.target.value)},x=async i=>{i.preventDefault(),l(!0);try{const t=await fetch("http://ec2-13-234-31-37.ap-south-1.compute.amazonaws.com:8181/clientcategories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ccName:c})});if(!t.ok){const C=await t.text();throw new Error(C||"Failed to add client")}n("Category added successfully!"),d(""),setTimeout(()=>{y("/category/edit")},2e3)}catch(t){r(t.message)}finally{l(!1)}};return p?e.jsx("div",{children:"Loading..."}):g?e.jsxs(T,{maxWidth:"sm",children:[e.jsx(v,{variant:"h4",gutterBottom:!0,children:"Add Category"}),e.jsxs("form",{onSubmit:x,children:[e.jsx(A,{label:"Category Name",variant:"outlined",fullWidth:!0,value:c,onChange:f,margin:"normal",required:!0}),e.jsx(S,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,loading:m,children:"Add Category"})]}),s&&e.jsx(u,{open:!!s,autoHideDuration:6e3,onClose:()=>n(""),children:e.jsx(h,{onClose:()=>n(""),severity:"success",sx:{width:"100%"},children:s})}),o&&e.jsx(u,{open:!!o,autoHideDuration:6e3,onClose:()=>r(""),children:e.jsx(h,{onClose:()=>r(""),severity:"error",sx:{width:"100%"},children:o})})]}):null};export{R as default};
